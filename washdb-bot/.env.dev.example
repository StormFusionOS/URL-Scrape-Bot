# Development Environment Configuration
# Copy this file to .env.dev for local development
# These settings are optimized for safe local testing (reduced load, slower scraping)

# ===========================================
# Database Configuration
# ===========================================
DATABASE_URL=postgresql+psycopg://washbot:Washdb123@127.0.0.1:5432/washbot_db
WASHDB_PASSWORD=Washdb123

# ===========================================
# Dashboard Configuration
# ===========================================
NICEGUI_PORT=8080
GUI_PORT=5001  # Legacy Flask (not used)
GUI_HOST=127.0.0.1

# ===========================================
# Scraper Settings (DEVELOPMENT - Conservative)
# ===========================================

# Worker configuration (reduced for local dev)
WORKER_COUNT=2  # Production: 5-10 | Dev: 2 (gentle on local machine)
MIN_DELAY_SECONDS=12.0  # Production: 8.0 | Dev: 12.0 (slower, safer)
MAX_DELAY_SECONDS=25.0  # Production: 20.0 | Dev: 25.0 (more conservative)

# Crawl delays (increased for development)
CRAWL_DELAY_SECONDS=15  # Production: 10 | Dev: 15 (avoid rate limiting)

# Concurrency limits (reduced for local testing)
MAX_CONCURRENT_SITE_SCRAPES=2  # Production: 5 | Dev: 2 (lower resource usage)
MAX_TARGETS_PER_BROWSER=20  # Production: 100 | Dev: 20 (smaller batches)

# Database connection pool (reduced for local dev)
DB_POOL_SIZE=10  # Production: 20 | Dev: 10

# ===========================================
# Browser Configuration
# ===========================================
USE_PLAYWRIGHT=true
BROWSER_HEADLESS=true  # Set to false to see browser during development
BROWSER_TIMEOUT_MS=30000

# ===========================================
# Anti-Detection & Stealth
# ===========================================
ANTI_DETECTION_ENABLED=true
RANDOMIZE_USER_AGENT=true
RANDOMIZE_VIEWPORT=true
ADAPTIVE_RATE_LIMITING=true

# ===========================================
# Proxy Settings (Optional)
# ===========================================
# Uncomment and configure if using proxies
# PROXY_FILE=data/webshare_proxies.txt
# PROXY_ROTATION_ENABLED=true
# PROXY_SELECTION_STRATEGY=round_robin  # Options: round_robin, random, least_used

# ===========================================
# Scraper URLs
# ===========================================
YP_BASE=https://www.yellowpages.com/search
GOOGLE_MAPS_BASE=https://www.google.com/maps/search/
BING_BASE=https://www.bing.com/local

# ===========================================
# Vector Database (Qdrant)
# ===========================================
QDRANT_HOST=127.0.0.1
QDRANT_PORT=6333
EMBEDDING_MODEL=all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# ===========================================
# Logging Configuration
# ===========================================
LOG_LEVEL=INFO  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_DIR=logs

# ===========================================
# Development Safety Limits
# ===========================================
# These prevent runaway behavior during local testing
# Enforced by runner/safety.py module

# Maximum pages to process per run (None = unlimited)
DEV_MAX_PAGES=50  # Production: None | Dev: 50 (safety limit)

# Maximum consecutive failures before aborting
DEV_MAX_FAILURES=5  # Production: 10 | Dev: 5 (fail-fast)

# Enable kill switch functionality
DEV_ENABLE_KILL_SWITCH=true  # Should always be true

# Rate limiting (adaptive delays based on success/failure)
# These work with the RateLimiter class in runner/safety.py

# ===========================================
# Testing Configuration
# ===========================================
TEST_MODE=false
TEST_DATABASE_URL=postgresql+psycopg://washbot:Washdb123@127.0.0.1:5432/washbot_test

# ===========================================
# Notes for Production
# ===========================================
# When moving to production, adjust these settings:
# - WORKER_COUNT: 5-10 (depending on server capacity)
# - MIN_DELAY_SECONDS: 8.0
# - MAX_DELAY_SECONDS: 20.0
# - CRAWL_DELAY_SECONDS: 10
# - MAX_CONCURRENT_SITE_SCRAPES: 5
# - MAX_TARGETS_PER_BROWSER: 100
# - DB_POOL_SIZE: 20
# - Enable proxies for better anonymity
# - Set BROWSER_HEADLESS=true always
