[Unit]
Description=WashDB Ultimate Stealth Scraper - Process Blocked Queue (runs every 30min)
After=network.target postgresql.service

[Service]
Type=oneshot
User=rivercityscrape
Group=rivercityscrape

# Load environment variables
EnvironmentFile=/home/rivercityscrape/URL-Scrape-Bot/washdb-bot/.env
EnvironmentFile=-/home/rivercityscrape/URL-Scrape-Bot/washdb-bot/systemd/washdb-bot.env

WorkingDirectory=/home/rivercityscrape/URL-Scrape-Bot/washdb-bot
Environment=DISPLAY=:99
Environment=PYTHONUNBUFFERED=1

# Process blocked queue (single batch, not continuous)
ExecStart=/home/rivercityscrape/URL-Scrape-Bot/washdb-bot/venv/bin/python scripts/ultimate_stealth_scraper.py --process-queue --batch-size 20

# Logging
StandardOutput=append:/home/rivercityscrape/URL-Scrape-Bot/washdb-bot/logs/ultimate_stealth.log
StandardError=append:/home/rivercityscrape/URL-Scrape-Bot/washdb-bot/logs/ultimate_stealth_error.log

[Install]
WantedBy=multi-user.target
